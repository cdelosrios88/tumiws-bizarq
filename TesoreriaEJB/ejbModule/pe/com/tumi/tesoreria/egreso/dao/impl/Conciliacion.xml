<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
	"http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="ConciliacionDaoIbatis">

  <typeAlias type="pe.com.tumi.tesoreria.egreso.domain.Conciliacion" alias="Conciliacion"/>
  <typeAlias type="pe.com.tumi.tesoreria.ingreso.domain.Ingreso" alias="Ingreso"/> 
	
  <resultMap id="resIngreso" class="Ingreso" >
	<result property="id.intIdEmpresa"  					column="pEmpresaingreso" />
	<result property="id.intIdIngresoGeneral"   			column="pitemingresogeneral" />
    <result property="intParaDocumentoGeneral"     			column="pdocumentogeneral" />
    <result property="intItemPeriodoIngreso"      			column="pitemperiodoingreso" />
    <result property="intItemIngreso"      					column="pitemingreso" />
    <result property="dtFechaIngreso"      					column="pfechaingreso" />
    <result property="intSucuIdSucursal"      				column="pidsucursal" />
    <result property="intSudeIdSubsucursal"      			column="pidsubsucursal" />
    <result property="intPersEmpresaGirado"      			column="pempresagirado" />
    <result property="intPersPersonaGirado"      			column="ppersonagirado" />
    <result property="bdMontoTotal"      					column="pmontototal" />
    <result property="strNumeroOperacion"      				column="pnumerooperacion" />
    <result property="strObservacion"      					column="pobservacion" />
    <result property="tsFechaProceso"      					column="pfechaprogreso" />
    <result property="strNumeroIngreso"      				column="pnumRefIngreso" />
  </resultMap>
<!-- Inicio: REQ14-006 Bizarq - 26/10/2014  -->
  <!--
  <resultMap id="resConciliacion" class="Conciliacion" >
	<result property="id.intPersEmpresa"  			column="pempresaconciliacion" />
	<result property="id.intItemConciliacion"   	column="pitemconciliacion" />
	<result property="id.tsFechaConciliacion"      	column="pfechaconciliacion" />
    <result property="intPersEmpresa"     			column="pempresa" />
    <result property="intItemBancoFondo" 			column="pitembancofondo" />
    <result property="intItemBancoCuenta"   		column="pitembancocuenta" />
    <result property="bdMontoSaldoInicial"    		column="pmontosaldoinicial" />
    <result property="bdMontoDebe"    				column="pmontodebe" />
    <result property="bdMontoHaber"      			column="pmontohaber" />
    <result property="intRegistrosConciliados"      column="pregistrosconciliados" />
    <result property="intRegistrosNoConciliados"    column="pregistrosnoconciliados" />
    <result property="intPersEmpresaConcilia"      	column="pempresaconci" />
    <result property="intPersPersonaConcilia"   	column="ppersonaconci" />
    <result property="intPersEmpresaAnula"      	column="pempresaconcianula" />
    <result property="intPersPersonaAnula"      	column="ppersonaconcianula" />
    <result property="tsFechaAnula"      			column="pfechaanula" />
    <result property="strObservaci贸nAnula"     		column="pobservacionanula" />
    <result property="intParaEstado"     			column="pestado" />
  </resultMap>
  -->
  	
  <resultMap id="resConciliacion" class="Conciliacion" >
	<result property="id.intPersEmpresa"  			column="pempresaconciliacion" />
	<result property="id.intItemConciliacion"   	column="pitemconciliacion" />
	<result property="tsFechaConciliacion"      	column="pfechaconciliacion" />
    <result property="intPersEmpresa"     			column="pempresa" />
    <result property="intItemBancoFondo" 			column="pitembancofondo" />
    <result property="intItemBancoCuenta"   		column="pitembancocuenta" />
    <result property="bdMontoSaldoInicial"    		column="pmontosaldoinicial" />
    <result property="bdMontoDebe"    				column="pmontodebe" />
    <result property="bdMontoHaber"      			column="pmontohaber" />
    <result property="intRegistrosConciliados"      column="pregistrosconciliados" />
    <result property="intRegistrosNoConciliados"    column="pregistrosnoconciliados" />
    <result property="intPersEmpresaConcilia"      	column="pempresaconci" />
    <result property="intPersPersonaConcilia"   	column="ppersonaconci" />
    <result property="intPersEmpresaAnula"      	column="pempresaconcianula" />
    <result property="intPersPersonaAnula"      	column="ppersonaconcianula" />
    <result property="tsFechaAnula"      			column="pfechaanula" />
    <result property="strObservaci贸nAnula"     		column="pobservacionanula" />
    <result property="intParaEstado"     			column="pestado" />
	<result property="tsFechaConcilia"     			column="ptsFechaConcilia" />
  </resultMap>
  
  <resultMap id="resConciliacionBusq" class="Conciliacion">
	<result property="id.intPersEmpresa"  			column="pempresaconciliacion" />
	<result property="id.intItemConciliacion"   	column="pitemconciliacion" />
	<result property="tsFechaConciliacion"      	column="pfechaconciliacion" />
    <result property="intPersEmpresa"     			column="pempresa" />
    <result property="intItemBancoFondo" 			column="pitembancofondo" />
    <result property="intItemBancoCuenta"   		column="pitembancocuenta" />
    <result property="bdMontoSaldoInicial"    		column="pmontosaldoinicial" />
    <result property="bdMontoDebe"    				column="pmontodebe" />
    <result property="bdMontoHaber"      			column="pmontohaber" />
    <result property="intRegistrosConciliados"      column="pregistrosconciliados" />
    <result property="intRegistrosNoConciliados"    column="pregistrosnoconciliados" />
    <result property="intPersEmpresaConcilia"      	column="pempresaconci" />
    <result property="intPersPersonaConcilia"   	column="ppersonaconci" />
    <result property="intPersEmpresaAnula"      	column="pempresaconcianula" />
    <result property="intPersPersonaAnula"      	column="ppersonaconcianula" />
    <result property="tsFechaAnula"      			column="pfechaanula" />
    <result property="strObservaci贸nAnula"     		column="pobservacionanula" />
    <result property="intParaEstado"     			column="pestado" />
	<result property="tsFechaConcilia"     			column="ptsFechaConcilia" />
    <result property="strBanco"     				column="pDescripcionbanco" />
    <result property="strTipoCuenta" 				column="pDescripciontipocuenta" />
    <result property="strMoneda"   					column="pDescripcionmoneda" /> 
    <result property="strNumeroCuenta"    			column="pNrocuenta" />
    <result property="bdSaldoCaja"    				column="pSaldocaja" />
    <result property="intNroMovimientos"      		column="pNromovimientos" />
    <result property="bdSaldoConciliacion"      	column="pSaldoConciliacion" />
    <result property="bdPorConciliar"      			column="pPorconciliar"/>

  </resultMap>
  <!-- Fin: REQ14-006 Bizarq - 26/10/2014  -->
  
  <parameterMap id="parConciliacion" class="Conciliacion">
	 <parameter property="id.intPersEmpresa"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="id.intItemConciliacion"		javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>	 
	 <parameter property="tsFechaConciliacion"			javaType="java.sql.Timestamp"		jdbcType="TIMESTAMP"	mode="INOUT"/>
	 <parameter property="intPersEmpresa"				javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="intItemBancoFondo"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="intItemBancoCuenta"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="bdMontoSaldoInicial"			javaType="java.math.BigDecimal"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="bdMontoDebe"					javaType="java.math.BigDecimal"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="bdMontoHaber"					javaType="java.math.BigDecimal"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="intRegistrosConciliados"		javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="intRegistrosNoConciliados"	javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="intPersEmpresaConcilia"		javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="intPersPersonaConcilia"		javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="intPersEmpresaAnula"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="intPersPersonaAnula"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
	 <parameter property="tsFechaAnula"					javaType="java.sql.Timestamp"		jdbcType="TIMESTAMP"	mode="INOUT"/>
	 <parameter property="strObservaci贸nAnula"			javaType="java.lang.String"			jdbcType="VARCHAR"		mode="INOUT"/>
	 <parameter property="intParaEstado"				javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="INOUT"/>
<!-- Inicio: REQ14-006 Bizarq - 26/10/2014  -->
	<parameter property="tsFechaConcilia"     			javaType="java.sql.Timestamp"		jdbcType="TIMESTAMP"	mode="INOUT"/>
	<parameter property="bdSaldoConciliacion"			javaType="java.math.BigDecimal"		jdbcType="NUMERIC"		mode="INOUT"/>
	<parameter property="bdSaldoCaja"					javaType="java.math.BigDecimal"		jdbcType="NUMERIC"		mode="INOUT"/>
	<parameter property="bdMontoDebeNoConci"			javaType="java.math.BigDecimal"		jdbcType="NUMERIC"		mode="INOUT"/>
	<parameter property="bdMontoHaberNoConci"			javaType="java.math.BigDecimal"		jdbcType="NUMERIC"		mode="INOUT"/>
<!-- Fin: REQ14-006 Bizarq - 26/10/2014  -->	
  </parameterMap>
  
  <parameterMap id="parPorPk" class="java.util.Map">
   	 <parameter property="cursorLista" 					javaType="java.sql.ResultSet" 		jdbcType="ORACLECURSOR" mode="OUT"/>
   	 <parameter property="intPersEmpresa"				javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>
	 <parameter property="intItemConciliacion"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>		
  </parameterMap>

  <!-- Inicio: REQ14-006 Bizarq - 26/10/2014  -->
  <parameterMap id="parPorFilter" class="java.util.Map">
   	 <parameter property="cursorLista" 					javaType="java.sql.ResultSet" 		jdbcType="ORACLECURSOR" mode="OUT"/>
   	 <parameter property="dtBusqFechaDesde"				javaType="java.util.Date"			jdbcType="DATE"			mode="IN"/>
	 <parameter property="dtBusqFechaHasta"				javaType="java.util.Date"			jdbcType="DATE"			mode="IN"/>
  	 <parameter property="intBusqPersEmpresa"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>
	 <parameter property="intBusqItemBancoFondo"		javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>
	 <parameter property="intBusqItemBancoCuenta"		javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>  
  </parameterMap>
  
  <parameterMap id="parPorLastConciliacion" class="java.util.Map">
   	 <parameter property="cursorLista" 					javaType="java.sql.ResultSet" 		jdbcType="ORACLECURSOR" mode="OUT"/>
   	 <parameter property="intPersEmpresa"				javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>
   	 <parameter property="intParaEstado"				javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>
	 <parameter property="intItemBancoFondo"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>	
	 <parameter property="intItemBancoCuenta"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>	
  </parameterMap>
  
  <parameterMap id="parPorTransCuentaIng" class="java.util.Map">
   	 <parameter property="cursorLista" 					javaType="java.sql.ResultSet" 		jdbcType="ORACLECURSOR" mode="OUT"/>
	 <parameter property="intItemBancoFondo"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>	
	 <parameter property="intItemBancoCuenta"			javaType="java.lang.Integer"		jdbcType="NUMERIC"		mode="IN"/>
	 <parameter property="dtFechaDesde"				javaType="java.util.Date"			jdbcType="DATE"			mode="IN"/>
   	 <parameter property="dtFechaHasta"				javaType="java.util.Date"			jdbcType="DATE"			mode="IN"/>	
  </parameterMap>
  <!-- Fin: REQ14-006 Bizarq - 26/10/2014 -->
  
  <procedure id="grabar" parameterMap="parConciliacion">
	{ call PKG_CONCILIACIONRE.grabar(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) }  
  </procedure>
  
  <procedure id="modificar" parameterMap="parConciliacion" >
	{ call PKG_CONCILIACIONRE.modificar(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?) }  
  </procedure>
  
  <procedure id="getListaPorPk" parameterMap="parPorPk" resultMap="resConciliacion">
	{ call PKG_CONCILIACIONRE.getListaPorPk(?,?,?) }
  </procedure>
  
  <procedure id="getListFilter" parameterMap="parPorFilter" resultMap="resConciliacionBusq">
	{ call PKG_CONCILIACIONRE.getListFilter(?,?,?,?,?,?) }
  </procedure>
  
  <!-- Inicio: REQ14-006 Bizarq - 26/10/2014  -->
  <procedure id="getLastConciliacionByCuenta" parameterMap="parPorLastConciliacion" resultMap="resConciliacion">
	{ call PKG_CONCILIACIONRE.getLastConciliacionByCuenta(?,?,?,?,?)}
  </procedure>
  <procedure id="getListaTransCuentaIngreso" parameterMap="parPorTransCuentaIng" resultMap="resIngreso">
	{ call PKG_CONCILIACIONRE.getListaTransCuentaIngreso(?,?,?,?,?) }
  </procedure> 
  <!-- Fin: REQ14-006 Bizarq - 26/10/2014  -->

</sqlMap>