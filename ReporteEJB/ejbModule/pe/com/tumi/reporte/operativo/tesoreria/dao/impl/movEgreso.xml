<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
	"http://www.ibatis.com/dtd/sql-map-2.dtd">
	
<sqlMap namespace="MovEgresoDaoIbatis">
<typeAlias type="pe.com.tumi.reporte.operativo.tesoreria.domain.MovEgreso" alias="MovEgreso"/>
<typeAlias type="pe.com.tumi.reporte.operativo.tesoreria.domain.MovEgresoDetalle" alias="MovEgresoDetalle"/>

<typeAlias type="pe.com.tumi.reporte.operativo.tesoreria.domain.EgresoFondoFijo" alias="EgresoFondoFijo"/>
	<resultMap id="resMovEgreso" class="MovEgreso" >
		 <result property="intRow"  				column="pNROSECUENCIAL" />
	     <result property="intEmpresaEgreso"  		column="pEMPRESAEGRESO" />
	     <result property="intItemEgresoGeneral"   	column="pITEMEGRESO" />
	     <result property="intPeriodoEgreso"    	column="pITEMPERIODO" />
	     <result property="intItemFondoFijo"		column="pITEMFONDOFIJO" />
	     <result property="bdMontoApertura"   		column="pMONTOAPERTURA" />
	     <result property="strDescripcion"   		column="pTEXTOCOMBO" />
	</resultMap>
	
	<resultMap id="resMovEgresoReport" class="MovEgreso" >
		 <result property="intEmpresaEgreso"  		column="pIntEmpresaEgreso_n" />
	     <result property="intItemEgresoGeneral"   	column="pInItemEgresoGeneral_n" />
	     <result property="strNroMovimiento"    	column="pNROMOVIMIENTO" />
	     <result property="strNroEgreso"			column="pNROEGRESO" />
	     <result property="intIdSucursal"   		column="pIDSUCURSAL_N" />
	     <result property="strSucursal"   			column="pNOMBRESUCURSAL" />
	     <result property="strFechaEgreso"   		column="pFECHAEGRESO" />
	     <result property="strConcepto"   			column="pCONCEPTO" />
	     <result property="intParaFormaPago"   		column="pNROFORMAPAGO" />
	     <result property="strFormaPago"   			column="pFORMAPAGO" />
	     <result property="strMoneda"   			column="pMONEDA" />
	     <result property="bdMonto"   				column="pMONTO" />
	     <result property="strDescMonto"   			column="pDESCRIPCIONMONTO" />
	     <result property="bdMontoApertura"   		column="pMONTOAPERTURA" />
	     <result property="bdMontoSaldo"   			column="pMONTOSALDO" />
	     <result property="bdMontoUtilizado"   		column="pMONTOUTILIZADO" />
	     <result property="strFechaCierre"   		column="pFECHACIERRE" />
	     <result property="strNombreCuenta"   		column="pNOMBRECUENTA" />
	     <result property="strNumeroCuenta"   		column="pCONTNROCUENTA" />
	     <result property="strBanco"   				column="pNOMBREBANCO" />
	     <result property="strNroCheque"   			column="pNROCHEQUE" />
	     <result property="strNroPlanilla"   		column="pNROPLANILLA" />
	     <result property="strNroAsiento"   		column="pNROASIENTO" />
	     <result property="intIdUsuario"   			column="pPKNOMBREUSUARIO" />
	     <result property="strNombreUsuario"   		column="pNOMBREUSUARIO" />
	     <result property="strFechaHora"   			column="pFECHAHORA" />
	     <result property="intIdPersResponsable"   	column="pPKPERSONAENTREGUE" />
	     <result property="strPersonaEntrega"   	column="pPERSONAENTREGUE" />
	     <result property="strNroDocEntrega"   		column="pNRODOCUMENTO" />
	     <result property="intIdTipoDocumentoEntrega" column="pCODTIPODOCUMENTO" />
	     <result property="strTipoDocumentoEntrega" column="pDESCTIPODOCUMENTO" />
	</resultMap>
	
	<resultMap id="resMovEgresoDetalle" class="MovEgresoDetalle" >
	     <result property="intEmpresaEgreso"  		column="pIntEmpresaEgreso_n" />
	     <result property="intItemEgresoGeneral"   	column="pInItemEgresoGeneral_n" />
	     <result property="intParaMoneda"    		column="pCODMONEDA" />
	     <result property="strDescMoneda"			column="pNOMBREMONEDA" />
	     <result property="strDescEgreso"   		column="pDESCRIPCION" />
	     <result property="intIdSucursal"   		column="pCODSUCURSAL" />
	     <result property="strSucursal"   			column="pNOMBRESUCURSAL" />
	     <result property="bdMontoDebe"   			column="pMONTODEBE" />
	     <result property="bdMontoAbono"   			column="pMONTOABONO" />
	</resultMap>
	
	<resultMap id="resEgresoFondoFijo" class="EgresoFondoFijo" >
		 <result property="strNroMovimiento" 		column="pNROMOVIMIENTO" />
	     <result property="strFechaEgreso" 	 		column="pFECHAEGRESO" />
	     <result property="strConcepto"   			column="pCONCEPTO" />
	     <result property="bdMontoReporte"   	 	column="pMONTOREPORTE" />
	     <result property="intItemEgresoGeneral"	column="pITEMEGRESO" />
	</resultMap>
	
	<parameterMap id="parMovEgreso" class="java.util.Map">
	   	 <parameter property="cursorLista" 			javaType="java.sql.ResultSet" jdbcType="ORACLECURSOR"  mode="OUT"/>
	   	 <parameter property="intTipoFondoFijo" 	javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="intIdSucursal" 		javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="intAnio" 				javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	</parameterMap>
	
	<parameterMap id="parMovEgresoReport" class="java.util.Map">
	   	 <parameter property="cursorLista" 			javaType="java.sql.ResultSet" jdbcType="ORACLECURSOR"  mode="OUT"/>
	   	 <parameter property="intEmpresaEgresoPk" 	javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="intItemEgresoGeneral" javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	</parameterMap>
	
	<parameterMap id="parMovEgresoTabla" class="java.util.Map">
	   	 <parameter property="cursorLista" 			javaType="java.sql.ResultSet" jdbcType="ORACLECURSOR"  mode="OUT"/>
	   	 <parameter property="intItemFondo" 	javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="intPeriodoFondo" 		javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="dbMontoSaldo" 				javaType="java.lang.Double"  jdbcType="NUMERIC" 	   mode="IN"/>
	</parameterMap>
	
	<procedure id="getCadenaCajaChica" parameterMap="parMovEgreso" resultMap="resMovEgreso">
		{ call PKG_TESORERIA_EGRESOS.getCadenaCajaChica(?,?,?,?)}  
  	</procedure>
  	
  	<procedure id="getEgresoHead" parameterMap="parMovEgresoReport" resultMap="resMovEgresoReport">
		{ call PKG_TESORERIA_EGRESOS.getEgresoHead(?,?,?)}
  	</procedure>
  	
  	<procedure id="getEgresoBody" parameterMap="parMovEgresoReport" resultMap="resMovEgresoDetalle">
		{ call PKG_TESORERIA_EGRESOS.getEgresoDetalleBody(?,?,?)}
  	</procedure>
  	
  	<procedure id="getMovimientosCajaChicaBody" parameterMap="parMovEgresoTabla" resultMap="resEgresoFondoFijo">
		{ call PKG_TESORERIA_EGRESOS.getMovimientosCajaChicaBody(?,?,?,?)}  
  	</procedure>
</sqlMap>
