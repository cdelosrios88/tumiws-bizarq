<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" 
	"http://www.ibatis.com/dtd/sql-map-2.dtd">
	
<sqlMap namespace="MovEgresoDaoIbatis">
<typeAlias type="pe.com.tumi.reporte.operativo.tesoreria.domain.MovEgreso" alias="MovEgreso"/>
<typeAlias type="pe.com.tumi.reporte.operativo.tesoreria.domain.EgresoFondoFijo" alias="EgresoFondoFijo"/>
	<resultMap id="resMovEgreso" class="MovEgreso" >
		 <result property="intRow"  				column="pNROSECUENCIAL" />
	     <result property="intEmpresaEgreso"  		column="pEMPRESAEGRESO" />
	     <result property="intItemEgresoGeneral"   	column="pITEMEGRESO" />
	     <result property="intPeriodoEgreso"    	column="pITEMPERIODO" />
	     <result property="intItemFondoFijo"		column="pITEMFONDOFIJO" />
	     <result property="bdMontoApertura"   		column="pMONTOAPERTURA" />
	     <result property="strDescripcion"   		column="pTEXTOCOMBO" />
	</resultMap>
	
	<resultMap id="resEgresoFondoFijo" class="EgresoFondoFijo" >
		 <result property="strNroMovimiento" 		column="pNROMOVIMIENTO" />
	     <result property="strFechaEgreso" 	 		column="pFECHAEGRESO" />
	     <result property="strConcepto"   			column="pCONCEPTO" />
	     <result property="bdMontoReporte"   	 	column="pMONTOREPORTE" />
	     <result property="intItemEgresoGeneral"	column="pITEMEGRESO" />
	</resultMap>
	
	<parameterMap id="parMovEgreso" class="java.util.Map">
	   	 <parameter property="cursorLista" 			javaType="java.sql.ResultSet" jdbcType="ORACLECURSOR"  mode="OUT"/>
	   	 <parameter property="intTipoFondoFijo" 	javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="intIdSucursal" 		javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="intAnio" 				javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	</parameterMap>
	
	<parameterMap id="parMovEgresoTabla" class="java.util.Map">
	   	 <parameter property="cursorLista" 			javaType="java.sql.ResultSet" jdbcType="ORACLECURSOR"  mode="OUT"/>
	   	 <parameter property="intItemFondo" 	javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="intPeriodoFondo" 		javaType="java.lang.Integer"  jdbcType="NUMERIC" 	   mode="IN"/>
	   	 <parameter property="dbMontoSaldo" 				javaType="java.lang.Double"  jdbcType="NUMERIC" 	   mode="IN"/>
	</parameterMap>
	
	<procedure id="getCadenaCajaChica" parameterMap="parMovEgreso" resultMap="resMovEgreso">
		{ call PKG_TESORERIA_EGRESOS.getCadenaCajaChica(?,?,?,?)}  
  	</procedure>
  	<procedure id="getMovimientosCajaChicaBody" parameterMap="parMovEgresoTabla" resultMap="resEgresoFondoFijo">
		{ call PKG_TESORERIA_EGRESOS.getMovimientosCajaChicaBody(?,?,?,?)}  
  	</procedure>
</sqlMap>  	